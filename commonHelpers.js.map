{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst elements = {\n  input: document.querySelector('input#datetime-picker'),\n  startBtn: document.querySelector('button[type=\"button\"]'),\n  timeDays: document.querySelector('span[data-days]'),\n  timeMinutes: document.querySelector('span[data-minutes]'),\n  timeHours: document.querySelector('span[data-hours]'),\n  timeSeconds: document.querySelector('span[data-seconds]'),\n};\n\nelements.startBtn.addEventListener('click', startTimer);\n\nlet userSelectedDate = null;\nelements.startBtn.disabled = true;\nelements.input.disabled = false;\n\nconst flatpickrOptions = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const selectedDate = selectedDates[0];\n    handleDateSelection(selectedDate);\n  },\n};\n\nflatpickr(elements.input, flatpickrOptions);\n\nfunction handleDateSelection(selectedDate) {\n  if (selectedDate.getTime() <= Date.now()) {\n    iziToast.error({\n      position: 'topRight',\n      message: 'Please choose a date in the future',\n    });\n    elements.startBtn.disabled = true;\n  } else {\n    userSelectedDate = selectedDate.getTime();\n    elements.startBtn.disabled = false;\n  }\n}\n\nfunction startTimer() {\n  if (!userSelectedDate) return;\n\n  elements.input.disabled = true;\n  const intervalId = setInterval(() => {\n    const now = new Date();\n    const totalMs = userSelectedDate - now.getTime();\n    const time = convertMs(totalMs);\n    updateDisplayedTime(time);\n    elements.startBtn.disabled = true;\n\n    if (totalMs <= 0) {\n      clearInterval(intervalId);\n      elements.input.disabled = false;\n      resetDisplayedTime();\n      iziToast.success({\n        position: 'topRight',\n        message: 'Countdown finished!',\n      });\n    }\n  }, 1000);\n}\n\nfunction updateDisplayedTime({ days, hours, minutes, seconds }) {\n  elements.timeDays.textContent = days;\n  elements.timeHours.textContent = hours;\n  elements.timeMinutes.textContent = minutes;\n  elements.timeSeconds.textContent = seconds;\n}\n\nfunction resetDisplayedTime() {\n  updateDisplayedTime({\n    days: '00',\n    hours: '00',\n    minutes: '00',\n    seconds: '00',\n  });\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = padTime(Math.floor(ms / day));\n  const hours = padTime(Math.floor((ms % day) / hour));\n  const minutes = padTime(Math.floor(((ms % day) % hour) / minute));\n  const seconds = padTime(Math.floor((((ms % day) % hour) % minute) / second));\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction padTime(value) {\n  return String(value).padStart(2, '0');\n}\n"],"names":["elements","startTimer","userSelectedDate","flatpickrOptions","selectedDates","selectedDate","handleDateSelection","flatpickr","iziToast","intervalId","totalMs","time","convertMs","updateDisplayedTime","resetDisplayedTime","days","hours","minutes","seconds","ms","padTime","value"],"mappings":"+IAKA,MAAMA,EAAW,CACf,MAAO,SAAS,cAAc,uBAAuB,EACrD,SAAU,SAAS,cAAc,uBAAuB,EACxD,SAAU,SAAS,cAAc,iBAAiB,EAClD,YAAa,SAAS,cAAc,oBAAoB,EACxD,UAAW,SAAS,cAAc,kBAAkB,EACpD,YAAa,SAAS,cAAc,oBAAoB,CAC1D,EAEAA,EAAS,SAAS,iBAAiB,QAASC,CAAU,EAEtD,IAAIC,EAAmB,KACvBF,EAAS,SAAS,SAAW,GAC7BA,EAAS,MAAM,SAAW,GAE1B,MAAMG,EAAmB,CACvB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAeD,EAAc,CAAC,EACpCE,EAAoBD,CAAY,CACjC,CACH,EAEAE,EAAUP,EAAS,MAAOG,CAAgB,EAE1C,SAASG,EAAoBD,EAAc,CACrCA,EAAa,QAAO,GAAM,KAAK,IAAG,GACpCG,EAAS,MAAM,CACb,SAAU,WACV,QAAS,oCACf,CAAK,EACDR,EAAS,SAAS,SAAW,KAE7BE,EAAmBG,EAAa,UAChCL,EAAS,SAAS,SAAW,GAEjC,CAEA,SAASC,GAAa,CACpB,GAAI,CAACC,EAAkB,OAEvBF,EAAS,MAAM,SAAW,GAC1B,MAAMS,EAAa,YAAY,IAAM,CAEnC,MAAMC,EAAUR,EADJ,IAAI,OACuB,QAAO,EACxCS,EAAOC,EAAUF,CAAO,EAC9BG,EAAoBF,CAAI,EACxBX,EAAS,SAAS,SAAW,GAEzBU,GAAW,IACb,cAAcD,CAAU,EACxBT,EAAS,MAAM,SAAW,GAC1Bc,IACAN,EAAS,QAAQ,CACf,SAAU,WACV,QAAS,qBACjB,CAAO,EAEJ,EAAE,GAAI,CACT,CAEA,SAASK,EAAoB,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC9DlB,EAAS,SAAS,YAAce,EAChCf,EAAS,UAAU,YAAcgB,EACjChB,EAAS,YAAY,YAAciB,EACnCjB,EAAS,YAAY,YAAckB,CACrC,CAEA,SAASJ,GAAqB,CAC5BD,EAAoB,CAClB,KAAM,KACN,MAAO,KACP,QAAS,KACT,QAAS,IACb,CAAG,CACH,CAEA,SAASD,EAAUO,EAAI,CAMrB,MAAMJ,EAAOK,EAAQ,KAAK,MAAMD,EAAK,KAAG,CAAC,EACnCH,EAAQI,EAAQ,KAAK,MAAOD,EAAK,MAAO,IAAI,CAAC,EAC7CF,EAAUG,EAAQ,KAAK,MAAQD,EAAK,MAAO,KAAQ,GAAM,CAAC,EAC1DD,EAAUE,EAAQ,KAAK,MAASD,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAE3E,MAAO,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASE,EAAQC,EAAO,CACtB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}